{"ast":null,"code":"import _defineProperty from\"/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import React,{useState,useEffect}from\"react\";import{connect}from\"react-redux\";import{Link}from\"react-router-dom\";import{setAlert,login,clearErrors,loadUserCart,addProductToCart}from\"../../actions\";import Alert from\"../alert/Alert\";// eslint-disable-next-line\nimport css from\"../../css/login.css\";var Login=function Login(_ref){var setAlert=_ref.setAlert,login=_ref.login,clearErrors=_ref.clearErrors,authUser=_ref.authUser,loadUserCart=_ref.loadUserCart,history=_ref.history,addProductToCart=_ref.addProductToCart,cart=_ref.cart;var isAuthenticated=authUser.isAuthenticated,error=authUser.error;useEffect(function(){if(isAuthenticated){history.push(\"/\");cart.forEach(function(item){return addProductToCart(item);});loadUserCart();}if(error===\"Invalid Credentials\"){setAlert(error,\"danger\");clearErrors();}// eslint-disable-next-line\n},[error,isAuthenticated,history]);var _useState=useState({email:\"\",password:\"\"}),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var email=user.email,password=user.password;var onChange=function onChange(e){return setUser(_objectSpread(_objectSpread({},user),{},_defineProperty({},e.target.name,e.target.value)));};var onSubmit=function onSubmit(e){e.preventDefault();if(email===\"\"||password===\"\"){setAlert(\"Please fill in all fields\",\"danger\");}else{login({email:email,password:password});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex-center flex-dc\",children:[/*#__PURE__*/_jsx(Alert,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"login__background flex-center flex-dc\",children:[/*#__PURE__*/_jsxs(\"form\",{className:\"login__form\",onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",children:\"Email Address\"}),/*#__PURE__*/_jsx(\"input\",{className:\"login__input\",type:\"email\",name:\"email\",value:email,onChange:onChange,placeholder:\"Enter your email...\",required:true}),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{className:\"login__input\",type:\"password\",name:\"password\",value:password,onChange:onChange,placeholder:\"Enter your password...\",required:true}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn--secondary\",children:\"Login\"})]}),/*#__PURE__*/_jsx(Link,{to:\"/account/sign-up\",className:\"login__link--font-color\",children:\"Not yet a member? Sign up here!\"})]})]});};var mapStateToProps=function mapStateToProps(state){return{authUser:state.authUser,cart:state.cartItems.cart};};export default connect(mapStateToProps,{setAlert:setAlert,login:login,clearErrors:clearErrors,loadUserCart:loadUserCart,addProductToCart:addProductToCart})(Login);","map":{"version":3,"sources":["/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/src/components/navbar/Login.js"],"names":["React","useState","useEffect","connect","Link","setAlert","login","clearErrors","loadUserCart","addProductToCart","Alert","css","Login","authUser","history","cart","isAuthenticated","error","push","forEach","item","email","password","user","setUser","onChange","e","target","name","value","onSubmit","preventDefault","mapStateToProps","state","cartItems"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { connect } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport {\n  setAlert,\n  login,\n  clearErrors,\n  loadUserCart,\n  addProductToCart,\n} from \"../../actions\";\nimport Alert from \"../alert/Alert\";\n\n// eslint-disable-next-line\nimport css from \"../../css/login.css\";\n\nconst Login = ({\n  setAlert,\n  login,\n  clearErrors,\n  authUser,\n  loadUserCart,\n  history,\n  addProductToCart,\n  cart,\n}) => {\n  const { isAuthenticated, error } = authUser;\n\n  useEffect(() => {\n    if (isAuthenticated) {\n      history.push(\"/\");\n      cart.forEach((item) => addProductToCart(item));\n      loadUserCart();\n    }\n\n    if (error === \"Invalid Credentials\") {\n      setAlert(error, \"danger\");\n      clearErrors();\n    }\n    // eslint-disable-next-line\n  }, [error, isAuthenticated, history]);\n\n  const [user, setUser] = useState({\n    email: \"\",\n    password: \"\",\n  });\n\n  const { email, password } = user;\n\n  const onChange = (e) => setUser({ ...user, [e.target.name]: e.target.value });\n\n  const onSubmit = (e) => {\n    e.preventDefault();\n    if (email === \"\" || password === \"\") {\n      setAlert(\"Please fill in all fields\", \"danger\");\n    } else {\n      login({\n        email,\n        password,\n      });\n    }\n  };\n\n  return (\n    <div className='flex-center flex-dc'>\n      <Alert />\n      <div className='login__background flex-center flex-dc'>\n        <form className='login__form' onSubmit={onSubmit}>\n          <label htmlFor='email'>Email Address</label>\n          <input\n            className='login__input'\n            type='email'\n            name='email'\n            value={email}\n            onChange={onChange}\n            placeholder='Enter your email...'\n            required\n          />\n          <label htmlFor='password'>Password</label>\n          <input\n            className='login__input'\n            type='password'\n            name='password'\n            value={password}\n            onChange={onChange}\n            placeholder='Enter your password...'\n            required\n          />\n          <button type='submit' className='btn btn--secondary'>\n            Login\n          </button>\n        </form>\n        <Link to='/account/sign-up' className='login__link--font-color'>\n          Not yet a member? Sign up here!\n        </Link>\n      </div>\n    </div>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    authUser: state.authUser,\n    cart: state.cartItems.cart,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  setAlert,\n  login,\n  clearErrors,\n  loadUserCart,\n  addProductToCart,\n})(Login);\n"]},"metadata":{},"sourceType":"module"}