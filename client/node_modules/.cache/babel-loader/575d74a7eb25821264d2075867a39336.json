{"ast":null,"code":"import axios from \"axios\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { FETCH_SINGLE_PRODUCT, FETCH_PRODUCTS, FETCH_CATEGORY, SET_SLIDE_MENU, CLEAR_CATEGORY, CLEAR_PRODUCT, ADD_CART_ITEM, REMOVE_CART_ITEM, CART_ITEM_CHECK, CART_ERROR, UPDATE_QUANTITY, REGISTER_SUCCESS, REGISTER_FAIL, EMAIL_FAIL, USER_LOADED, LOAD_USER_CART, AUTH_ERROR, REMOVE_ALERT, SET_ALERT, CLEAR_ERRORS, LOGIN_SUCCESS, LOGIN_FAIL, LOGOUT } from \"../types\"; //open and close the slideMenu if true or false\n\nexport const showSlideMenu = () => {\n  return {\n    type: SET_SLIDE_MENU\n  };\n}; //get all products\n\nexport const getProducts = categories => {\n  return async dispatch => {\n    const response = await fetch(\"https://fakestoreapi.com/products\");\n    const data = await response.json();\n    dispatch({\n      type: FETCH_PRODUCTS,\n      payload: data\n    });\n    dispatch({\n      type: CLEAR_PRODUCT\n    });\n  };\n}; // fetch products by category\n\nexport const getCategory = category => {\n  return async dispatch => {\n    const response = await fetch(`https://fakestoreapi.com/products/category/${category}`);\n    const data = await response.json();\n    dispatch({\n      type: FETCH_CATEGORY,\n      payload: data\n    });\n  };\n};\nexport const clearCategory = () => {\n  return {\n    type: CLEAR_CATEGORY\n  };\n}; // fetch a single product by its id\n\nexport const getSingleProduct = id => {\n  return async dispatch => {\n    const response = await fetch(`https://fakestoreapi.com/products/${id}`);\n    const data = await response.json();\n    dispatch({\n      type: FETCH_SINGLE_PRODUCT,\n      payload: data\n    });\n  };\n}; //adds a product to the cartItems state\n\nexport const addProductToCart = cartItem => {\n  return async (dispatch, getState) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n    const isAuthenticated = getState().authUser.isAuthenticated;\n\n    try {\n      if (isAuthenticated) {\n        const res = await axios.post(\"/api/cart\", cartItem, config);\n        dispatch({\n          type: ADD_CART_ITEM,\n          payload: res.data\n        });\n      } else {\n        dispatch({\n          type: ADD_CART_ITEM,\n          payload: cartItem\n        });\n      }\n    } catch (err) {\n      dispatch({\n        type: CART_ERROR,\n        payload: err.response.msg\n      });\n    }\n  };\n}; //remove a product from the cartItems state\n\nexport const removeProductFromCart = (cartItem, id) => {\n  return async (dispatch, getState) => {\n    const isAuthenticated = getState().authUser.isAuthenticated;\n\n    try {\n      if (isAuthenticated) {\n        const res = await axios.delete(`/api/cart/${id}`);\n        dispatch({\n          type: REMOVE_CART_ITEM,\n          payload: +cartItem\n        });\n      } else {\n        dispatch({\n          type: REMOVE_CART_ITEM,\n          payload: +cartItem\n        });\n      }\n    } catch (err) {\n      dispatch({\n        type: CART_ERROR,\n        payload: err.message\n      });\n    }\n  };\n};\nexport const updateQuantity = ({\n  _id,\n  id,\n  quantity\n}) => {\n  return async (dispatch, getState) => {\n    const isAuthenticated = getState().authUser.isAuthenticated;\n\n    try {\n      if (isAuthenticated) {\n        const res = await axios.put(`/api/cart/${_id}`, {\n          quantity\n        });\n        dispatch({\n          type: UPDATE_QUANTITY,\n          payload: res.data\n        });\n      } else {\n        dispatch({\n          type: UPDATE_QUANTITY,\n          payload: {\n            id,\n            quantity\n          }\n        });\n      }\n    } catch (err) {\n      dispatch({\n        type: CART_ERROR,\n        payload: err.message\n      });\n    }\n  };\n}; //checks if an item is already inside the cartItems state by matching the id\n\nexport const isItemInCart = () => {\n  alert(\"That item is already in cart\");\n  return {\n    type: CART_ITEM_CHECK\n  };\n};\nexport const loadUserCart = () => {\n  return async dispatch => {\n    const res = await axios.get(\"/api/cart\");\n    dispatch({\n      type: LOAD_USER_CART,\n      payload: res.data\n    });\n  };\n}; // Load user\n\nexport const loadUser = () => {\n  return async dispatch => {\n    setAuthToken(localStorage.token);\n\n    try {\n      const res = await axios.get(\"/api/auth\");\n      dispatch({\n        type: USER_LOADED,\n        payload: res.data\n      });\n    } catch (err) {\n      dispatch({\n        type: AUTH_ERROR,\n        payload: err.response\n      });\n    }\n  };\n}; // Register user\n\nexport const registerUser = user => {\n  return async dispatch => {\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n\n    try {\n      const res = await axios.post(\"/api/users\", user, config);\n      dispatch({\n        type: REGISTER_SUCCESS,\n        payload: res.data\n      });\n      loadUser();\n    } catch (err) {\n      console.log(err.response);\n\n      if (err.response.data.msg === \"User already exists\") {\n        dispatch({\n          type: REGISTER_FAIL,\n          payload: err.response.data.msg\n        });\n      } else {\n        dispatch({\n          type: EMAIL_FAIL,\n          payload: err.response.data.errors[0].msg\n        });\n      }\n    }\n  };\n}; // Login user\n\nexport const login = user => {\n  return async dispatch => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\"\n      }\n    };\n\n    try {\n      const res = await axios.post(\"/api/auth\", user, config);\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: res.data\n      });\n      loadUser();\n    } catch (err) {\n      dispatch({\n        type: LOGIN_FAIL,\n        payload: err.response.data.msg\n      });\n    }\n  };\n}; // Logout User\n\nexport const logout = () => {\n  return {\n    type: LOGOUT\n  };\n}; // Set alert\n\nexport const setAlert = (msg, type, timeout = 5000) => {\n  const id = uuidv4();\n  return async dispatch => {\n    dispatch({\n      type: SET_ALERT,\n      payload: {\n        msg,\n        type,\n        id\n      }\n    });\n    setTimeout(() => dispatch({\n      type: REMOVE_ALERT,\n      payload: id\n    }), timeout);\n  };\n};\nexport const clearErrors = () => {\n  return {\n    type: CLEAR_ERRORS\n  };\n};","map":{"version":3,"sources":["/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/src/actions/index.js"],"names":["axios","setAuthToken","v4","uuidv4","FETCH_SINGLE_PRODUCT","FETCH_PRODUCTS","FETCH_CATEGORY","SET_SLIDE_MENU","CLEAR_CATEGORY","CLEAR_PRODUCT","ADD_CART_ITEM","REMOVE_CART_ITEM","CART_ITEM_CHECK","CART_ERROR","UPDATE_QUANTITY","REGISTER_SUCCESS","REGISTER_FAIL","EMAIL_FAIL","USER_LOADED","LOAD_USER_CART","AUTH_ERROR","REMOVE_ALERT","SET_ALERT","CLEAR_ERRORS","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","showSlideMenu","type","getProducts","categories","dispatch","response","fetch","data","json","payload","getCategory","category","clearCategory","getSingleProduct","id","addProductToCart","cartItem","getState","config","headers","isAuthenticated","authUser","res","post","err","msg","removeProductFromCart","delete","message","updateQuantity","_id","quantity","put","isItemInCart","alert","loadUserCart","get","loadUser","localStorage","token","registerUser","user","header","console","log","errors","login","logout","setAlert","timeout","setTimeout","clearErrors"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport {\n  FETCH_SINGLE_PRODUCT,\n  FETCH_PRODUCTS,\n  FETCH_CATEGORY,\n  SET_SLIDE_MENU,\n  CLEAR_CATEGORY,\n  CLEAR_PRODUCT,\n  ADD_CART_ITEM,\n  REMOVE_CART_ITEM,\n  CART_ITEM_CHECK,\n  CART_ERROR,\n  UPDATE_QUANTITY,\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  EMAIL_FAIL,\n  USER_LOADED,\n  LOAD_USER_CART,\n  AUTH_ERROR,\n  REMOVE_ALERT,\n  SET_ALERT,\n  CLEAR_ERRORS,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n} from \"../types\";\n\n//open and close the slideMenu if true or false\nexport const showSlideMenu = () => {\n  return {\n    type: SET_SLIDE_MENU,\n  };\n};\n\n//get all products\nexport const getProducts = (categories) => {\n  return async (dispatch) => {\n    const response = await fetch(\"https://fakestoreapi.com/products\");\n\n    const data = await response.json();\n\n    dispatch({\n      type: FETCH_PRODUCTS,\n      payload: data,\n    });\n    dispatch({\n      type: CLEAR_PRODUCT,\n    });\n  };\n};\n\n// fetch products by category\nexport const getCategory = (category) => {\n  return async (dispatch) => {\n    const response = await fetch(\n      `https://fakestoreapi.com/products/category/${category}`\n    );\n    const data = await response.json();\n\n    dispatch({\n      type: FETCH_CATEGORY,\n      payload: data,\n    });\n  };\n};\n\nexport const clearCategory = () => {\n  return {\n    type: CLEAR_CATEGORY,\n  };\n};\n\n// fetch a single product by its id\nexport const getSingleProduct = (id) => {\n  return async (dispatch) => {\n    const response = await fetch(`https://fakestoreapi.com/products/${id}`);\n    const data = await response.json();\n\n    dispatch({\n      type: FETCH_SINGLE_PRODUCT,\n      payload: data,\n    });\n  };\n};\n\n//adds a product to the cartItems state\nexport const addProductToCart = (cartItem) => {\n  return async (dispatch, getState) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    const isAuthenticated = getState().authUser.isAuthenticated;\n\n    try {\n      if (isAuthenticated) {\n        const res = await axios.post(\"/api/cart\", cartItem, config);\n\n        dispatch({\n          type: ADD_CART_ITEM,\n          payload: res.data,\n        });\n      } else {\n        dispatch({\n          type: ADD_CART_ITEM,\n          payload: cartItem,\n        });\n      }\n    } catch (err) {\n      dispatch({\n        type: CART_ERROR,\n        payload: err.response.msg,\n      });\n    }\n  };\n};\n\n//remove a product from the cartItems state\nexport const removeProductFromCart = (cartItem, id) => {\n  return async (dispatch, getState) => {\n    const isAuthenticated = getState().authUser.isAuthenticated;\n\n    try {\n      if (isAuthenticated) {\n        const res = await axios.delete(`/api/cart/${id}`);\n        dispatch({\n          type: REMOVE_CART_ITEM,\n          payload: +cartItem,\n        });\n      } else {\n        dispatch({\n          type: REMOVE_CART_ITEM,\n          payload: +cartItem,\n        });\n      }\n    } catch (err) {\n      dispatch({\n        type: CART_ERROR,\n        payload: err.message,\n      });\n    }\n  };\n};\n\nexport const updateQuantity = ({ _id, id, quantity }) => {\n  return async (dispatch, getState) => {\n    const isAuthenticated = getState().authUser.isAuthenticated;\n\n    try {\n      if (isAuthenticated) {\n        const res = await axios.put(`/api/cart/${_id}`, { quantity });\n        dispatch({\n          type: UPDATE_QUANTITY,\n          payload: res.data,\n        });\n      } else {\n        dispatch({\n          type: UPDATE_QUANTITY,\n          payload: { id, quantity },\n        });\n      }\n    } catch (err) {\n      dispatch({\n        type: CART_ERROR,\n        payload: err.message,\n      });\n    }\n  };\n};\n\n//checks if an item is already inside the cartItems state by matching the id\nexport const isItemInCart = () => {\n  alert(\"That item is already in cart\");\n  return {\n    type: CART_ITEM_CHECK,\n  };\n};\n\nexport const loadUserCart = () => {\n  return async (dispatch) => {\n    const res = await axios.get(\"/api/cart\");\n\n    dispatch({\n      type: LOAD_USER_CART,\n      payload: res.data,\n    });\n  };\n};\n\n// Load user\nexport const loadUser = () => {\n  return async (dispatch) => {\n    setAuthToken(localStorage.token);\n\n    try {\n      const res = await axios.get(\"/api/auth\");\n\n      dispatch({\n        type: USER_LOADED,\n        payload: res.data,\n      });\n    } catch (err) {\n      dispatch({ type: AUTH_ERROR, payload: err.response });\n    }\n  };\n};\n\n// Register user\nexport const registerUser = (user) => {\n  return async (dispatch) => {\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    try {\n      const res = await axios.post(\"/api/users\", user, config);\n\n      dispatch({\n        type: REGISTER_SUCCESS,\n        payload: res.data,\n      });\n\n      loadUser();\n    } catch (err) {\n      console.log(err.response);\n      if (err.response.data.msg === \"User already exists\") {\n        dispatch({\n          type: REGISTER_FAIL,\n          payload: err.response.data.msg,\n        });\n      } else {\n        dispatch({\n          type: EMAIL_FAIL,\n          payload: err.response.data.errors[0].msg,\n        });\n      }\n    }\n  };\n};\n\n// Login user\nexport const login = (user) => {\n  return async (dispatch) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    try {\n      const res = await axios.post(\"/api/auth\", user, config);\n\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: res.data,\n      });\n\n      loadUser();\n    } catch (err) {\n      dispatch({\n        type: LOGIN_FAIL,\n        payload: err.response.data.msg,\n      });\n    }\n  };\n};\n\n// Logout User\nexport const logout = () => {\n  return {\n    type: LOGOUT,\n  };\n};\n\n// Set alert\nexport const setAlert = (msg, type, timeout = 5000) => {\n  const id = uuidv4();\n  return async (dispatch) => {\n    dispatch({\n      type: SET_ALERT,\n      payload: { msg, type, id },\n    });\n\n    setTimeout(() => dispatch({ type: REMOVE_ALERT, payload: id }), timeout);\n  };\n};\n\nexport const clearErrors = () => {\n  return {\n    type: CLEAR_ERRORS,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}