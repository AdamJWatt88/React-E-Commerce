{"ast":null,"code":"import _regeneratorRuntime from\"/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import axios from\"axios\";import setAuthToken from\"../utils/setAuthToken\";import{v4 as uuidv4}from\"uuid\";import{FETCH_SINGLE_PRODUCT,FETCH_PRODUCTS,FETCH_CATEGORY,SET_SLIDE_MENU,CLEAR_CATEGORY,CLEAR_PRODUCT,ADD_CART_ITEM,REMOVE_CART_ITEM,CART_ITEM_CHECK,CART_ERROR,UPDATE_QUANTITY,REGISTER_SUCCESS,REGISTER_FAIL,EMAIL_FAIL,USER_LOADED,LOAD_USER_CART,AUTH_ERROR,REMOVE_ALERT,SET_ALERT,CLEAR_ERRORS,LOGIN_SUCCESS,LOGIN_FAIL,LOGOUT}from\"../types\";//open and close the slideMenu if true or false\nexport var showSlideMenu=function showSlideMenu(){return{type:SET_SLIDE_MENU};};//get all products\nexport var getProducts=function getProducts(categories){return/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(dispatch){var response,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return fetch(\"https://fakestoreapi.com/products\");case 2:response=_context.sent;_context.next=5;return response.json();case 5:data=_context.sent;dispatch({type:FETCH_PRODUCTS,payload:data});dispatch({type:CLEAR_PRODUCT});case 8:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}();};// fetch products by category\nexport var getCategory=function getCategory(category){return/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(dispatch){var response,data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"https://fakestoreapi.com/products/category/\".concat(category));case 2:response=_context2.sent;_context2.next=5;return response.json();case 5:data=_context2.sent;dispatch({type:FETCH_CATEGORY,payload:data});case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref2.apply(this,arguments);};}();};export var clearCategory=function clearCategory(){return{type:CLEAR_CATEGORY};};// fetch a single product by its id\nexport var getSingleProduct=function getSingleProduct(id){return/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(dispatch){var response,data;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return fetch(\"https://fakestoreapi.com/products/\".concat(id));case 2:response=_context3.sent;_context3.next=5;return response.json();case 5:data=_context3.sent;dispatch({type:FETCH_SINGLE_PRODUCT,payload:data});case 7:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref3.apply(this,arguments);};}();};//adds a product to the cartItems state\nexport var addProductToCart=function addProductToCart(cartItem){return/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(dispatch,getState){var config,isAuthenticated,res;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};isAuthenticated=getState().authUser.isAuthenticated;_context4.prev=2;if(!isAuthenticated){_context4.next=10;break;}_context4.next=6;return axios.post(\"/api/cart\",cartItem,config);case 6:res=_context4.sent;dispatch({type:ADD_CART_ITEM,payload:res.data});_context4.next=11;break;case 10:dispatch({type:ADD_CART_ITEM,payload:cartItem});case 11:_context4.next=16;break;case 13:_context4.prev=13;_context4.t0=_context4[\"catch\"](2);dispatch({type:CART_ERROR,payload:_context4.t0.response.msg});case 16:case\"end\":return _context4.stop();}}},_callee4,null,[[2,13]]);}));return function(_x4,_x5){return _ref4.apply(this,arguments);};}();};//remove a product from the cartItems state\nexport var removeProductFromCart=function removeProductFromCart(cartItem,id){return/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(dispatch,getState){var isAuthenticated,res;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:isAuthenticated=getState().authUser.isAuthenticated;_context5.prev=1;if(!isAuthenticated){_context5.next=9;break;}_context5.next=5;return axios.delete(\"/api/cart/\".concat(id));case 5:res=_context5.sent;dispatch({type:REMOVE_CART_ITEM,payload:+cartItem});_context5.next=10;break;case 9:dispatch({type:REMOVE_CART_ITEM,payload:+cartItem});case 10:_context5.next=15;break;case 12:_context5.prev=12;_context5.t0=_context5[\"catch\"](1);dispatch({type:CART_ERROR,payload:_context5.t0.message});case 15:case\"end\":return _context5.stop();}}},_callee5,null,[[1,12]]);}));return function(_x6,_x7){return _ref5.apply(this,arguments);};}();};export var updateQuantity=function updateQuantity(_ref6){var _id=_ref6._id,id=_ref6.id,quantity=_ref6.quantity;return/*#__PURE__*/function(){var _ref7=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(dispatch,getState){var isAuthenticated,res;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:isAuthenticated=getState().authUser.isAuthenticated;_context6.prev=1;if(!isAuthenticated){_context6.next=9;break;}_context6.next=5;return axios.put(\"/api/cart/\".concat(_id),{quantity:quantity});case 5:res=_context6.sent;dispatch({type:UPDATE_QUANTITY,payload:res.data});_context6.next=10;break;case 9:dispatch({type:UPDATE_QUANTITY,payload:{id:id,quantity:quantity}});case 10:_context6.next=15;break;case 12:_context6.prev=12;_context6.t0=_context6[\"catch\"](1);dispatch({type:CART_ERROR,payload:_context6.t0.message});case 15:case\"end\":return _context6.stop();}}},_callee6,null,[[1,12]]);}));return function(_x8,_x9){return _ref7.apply(this,arguments);};}();};//checks if an item is already inside the cartItems state by matching the id\nexport var isItemInCart=function isItemInCart(){alert(\"That item is already in cart\");return{type:CART_ITEM_CHECK};};export var loadUserCart=function loadUserCart(){return/*#__PURE__*/function(){var _ref8=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee7(dispatch){var res;return _regeneratorRuntime.wrap(function _callee7$(_context7){while(1){switch(_context7.prev=_context7.next){case 0:_context7.next=2;return axios.get(\"/api/cart\");case 2:res=_context7.sent;dispatch({type:LOAD_USER_CART,payload:res.data});case 4:case\"end\":return _context7.stop();}}},_callee7);}));return function(_x10){return _ref8.apply(this,arguments);};}();};// Load user\nexport var loadUser=function loadUser(){return/*#__PURE__*/function(){var _ref9=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee8(dispatch){var res;return _regeneratorRuntime.wrap(function _callee8$(_context8){while(1){switch(_context8.prev=_context8.next){case 0:setAuthToken(localStorage.token);_context8.prev=1;_context8.next=4;return axios.get(\"/api/auth\");case 4:res=_context8.sent;dispatch({type:USER_LOADED,payload:res.data});_context8.next=11;break;case 8:_context8.prev=8;_context8.t0=_context8[\"catch\"](1);dispatch({type:AUTH_ERROR,payload:_context8.t0.response});case 11:case\"end\":return _context8.stop();}}},_callee8,null,[[1,8]]);}));return function(_x11){return _ref9.apply(this,arguments);};}();};// Register user\nexport var registerUser=function registerUser(user){return/*#__PURE__*/function(){var _ref10=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee9(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee9$(_context9){while(1){switch(_context9.prev=_context9.next){case 0:config={header:{\"Content-Type\":\"application/json\"}};_context9.prev=1;_context9.next=4;return axios.post(\"/api/users\",user,config);case 4:res=_context9.sent;dispatch({type:REGISTER_SUCCESS,payload:res.data});loadUser();_context9.next=13;break;case 9:_context9.prev=9;_context9.t0=_context9[\"catch\"](1);console.log(_context9.t0.response);if(_context9.t0.response.data.msg===\"User already exists\"){dispatch({type:REGISTER_FAIL,payload:_context9.t0.response.data.msg});}else{dispatch({type:EMAIL_FAIL,payload:_context9.t0.response.data.errors[0].msg});}case 13:case\"end\":return _context9.stop();}}},_callee9,null,[[1,9]]);}));return function(_x12){return _ref10.apply(this,arguments);};}();};// Login user\nexport var login=function login(user){return/*#__PURE__*/function(){var _ref11=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee10(dispatch){var config,res;return _regeneratorRuntime.wrap(function _callee10$(_context10){while(1){switch(_context10.prev=_context10.next){case 0:config={headers:{\"Content-Type\":\"application/json\"}};_context10.prev=1;_context10.next=4;return axios.post(\"/api/auth\",user,config);case 4:res=_context10.sent;dispatch({type:LOGIN_SUCCESS,payload:res.data});loadUser();_context10.next=12;break;case 9:_context10.prev=9;_context10.t0=_context10[\"catch\"](1);dispatch({type:LOGIN_FAIL,payload:_context10.t0.response.data.msg});case 12:case\"end\":return _context10.stop();}}},_callee10,null,[[1,9]]);}));return function(_x13){return _ref11.apply(this,arguments);};}();};// Logout User\nexport var logout=function logout(){return{type:LOGOUT};};// Set alert\nexport var setAlert=function setAlert(msg,type){var timeout=arguments.length>2&&arguments[2]!==undefined?arguments[2]:5000;var id=uuidv4();return/*#__PURE__*/function(){var _ref12=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee11(dispatch){return _regeneratorRuntime.wrap(function _callee11$(_context11){while(1){switch(_context11.prev=_context11.next){case 0:dispatch({type:SET_ALERT,payload:{msg:msg,type:type,id:id}});setTimeout(function(){return dispatch({type:REMOVE_ALERT,payload:id});},timeout);case 2:case\"end\":return _context11.stop();}}},_callee11);}));return function(_x14){return _ref12.apply(this,arguments);};}();};export var clearErrors=function clearErrors(){return{type:CLEAR_ERRORS};};","map":{"version":3,"sources":["/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/src/actions/index.js"],"names":["axios","setAuthToken","v4","uuidv4","FETCH_SINGLE_PRODUCT","FETCH_PRODUCTS","FETCH_CATEGORY","SET_SLIDE_MENU","CLEAR_CATEGORY","CLEAR_PRODUCT","ADD_CART_ITEM","REMOVE_CART_ITEM","CART_ITEM_CHECK","CART_ERROR","UPDATE_QUANTITY","REGISTER_SUCCESS","REGISTER_FAIL","EMAIL_FAIL","USER_LOADED","LOAD_USER_CART","AUTH_ERROR","REMOVE_ALERT","SET_ALERT","CLEAR_ERRORS","LOGIN_SUCCESS","LOGIN_FAIL","LOGOUT","showSlideMenu","type","getProducts","categories","dispatch","fetch","response","json","data","payload","getCategory","category","clearCategory","getSingleProduct","id","addProductToCart","cartItem","getState","config","headers","isAuthenticated","authUser","post","res","msg","removeProductFromCart","delete","message","updateQuantity","_id","quantity","put","isItemInCart","alert","loadUserCart","get","loadUser","localStorage","token","registerUser","user","header","console","log","errors","login","logout","setAlert","timeout","setTimeout","clearErrors"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport setAuthToken from \"../utils/setAuthToken\";\nimport { v4 as uuidv4 } from \"uuid\";\n\nimport {\n  FETCH_SINGLE_PRODUCT,\n  FETCH_PRODUCTS,\n  FETCH_CATEGORY,\n  SET_SLIDE_MENU,\n  CLEAR_CATEGORY,\n  CLEAR_PRODUCT,\n  ADD_CART_ITEM,\n  REMOVE_CART_ITEM,\n  CART_ITEM_CHECK,\n  CART_ERROR,\n  UPDATE_QUANTITY,\n  REGISTER_SUCCESS,\n  REGISTER_FAIL,\n  EMAIL_FAIL,\n  USER_LOADED,\n  LOAD_USER_CART,\n  AUTH_ERROR,\n  REMOVE_ALERT,\n  SET_ALERT,\n  CLEAR_ERRORS,\n  LOGIN_SUCCESS,\n  LOGIN_FAIL,\n  LOGOUT,\n} from \"../types\";\n\n//open and close the slideMenu if true or false\nexport const showSlideMenu = () => {\n  return {\n    type: SET_SLIDE_MENU,\n  };\n};\n\n//get all products\nexport const getProducts = (categories) => {\n  return async (dispatch) => {\n    const response = await fetch(\"https://fakestoreapi.com/products\");\n\n    const data = await response.json();\n\n    dispatch({\n      type: FETCH_PRODUCTS,\n      payload: data,\n    });\n    dispatch({\n      type: CLEAR_PRODUCT,\n    });\n  };\n};\n\n// fetch products by category\nexport const getCategory = (category) => {\n  return async (dispatch) => {\n    const response = await fetch(\n      `https://fakestoreapi.com/products/category/${category}`\n    );\n    const data = await response.json();\n\n    dispatch({\n      type: FETCH_CATEGORY,\n      payload: data,\n    });\n  };\n};\n\nexport const clearCategory = () => {\n  return {\n    type: CLEAR_CATEGORY,\n  };\n};\n\n// fetch a single product by its id\nexport const getSingleProduct = (id) => {\n  return async (dispatch) => {\n    const response = await fetch(`https://fakestoreapi.com/products/${id}`);\n    const data = await response.json();\n\n    dispatch({\n      type: FETCH_SINGLE_PRODUCT,\n      payload: data,\n    });\n  };\n};\n\n//adds a product to the cartItems state\nexport const addProductToCart = (cartItem) => {\n  return async (dispatch, getState) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    const isAuthenticated = getState().authUser.isAuthenticated;\n\n    try {\n      if (isAuthenticated) {\n        const res = await axios.post(\"/api/cart\", cartItem, config);\n\n        dispatch({\n          type: ADD_CART_ITEM,\n          payload: res.data,\n        });\n      } else {\n        dispatch({\n          type: ADD_CART_ITEM,\n          payload: cartItem,\n        });\n      }\n    } catch (err) {\n      dispatch({\n        type: CART_ERROR,\n        payload: err.response.msg,\n      });\n    }\n  };\n};\n\n//remove a product from the cartItems state\nexport const removeProductFromCart = (cartItem, id) => {\n  return async (dispatch, getState) => {\n    const isAuthenticated = getState().authUser.isAuthenticated;\n\n    try {\n      if (isAuthenticated) {\n        const res = await axios.delete(`/api/cart/${id}`);\n        dispatch({\n          type: REMOVE_CART_ITEM,\n          payload: +cartItem,\n        });\n      } else {\n        dispatch({\n          type: REMOVE_CART_ITEM,\n          payload: +cartItem,\n        });\n      }\n    } catch (err) {\n      dispatch({\n        type: CART_ERROR,\n        payload: err.message,\n      });\n    }\n  };\n};\n\nexport const updateQuantity = ({ _id, id, quantity }) => {\n  return async (dispatch, getState) => {\n    const isAuthenticated = getState().authUser.isAuthenticated;\n\n    try {\n      if (isAuthenticated) {\n        const res = await axios.put(`/api/cart/${_id}`, { quantity });\n        dispatch({\n          type: UPDATE_QUANTITY,\n          payload: res.data,\n        });\n      } else {\n        dispatch({\n          type: UPDATE_QUANTITY,\n          payload: { id, quantity },\n        });\n      }\n    } catch (err) {\n      dispatch({\n        type: CART_ERROR,\n        payload: err.message,\n      });\n    }\n  };\n};\n\n//checks if an item is already inside the cartItems state by matching the id\nexport const isItemInCart = () => {\n  alert(\"That item is already in cart\");\n  return {\n    type: CART_ITEM_CHECK,\n  };\n};\n\nexport const loadUserCart = () => {\n  return async (dispatch) => {\n    const res = await axios.get(\"/api/cart\");\n\n    dispatch({\n      type: LOAD_USER_CART,\n      payload: res.data,\n    });\n  };\n};\n\n// Load user\nexport const loadUser = () => {\n  return async (dispatch) => {\n    setAuthToken(localStorage.token);\n\n    try {\n      const res = await axios.get(\"/api/auth\");\n\n      dispatch({\n        type: USER_LOADED,\n        payload: res.data,\n      });\n    } catch (err) {\n      dispatch({ type: AUTH_ERROR, payload: err.response });\n    }\n  };\n};\n\n// Register user\nexport const registerUser = (user) => {\n  return async (dispatch) => {\n    const config = {\n      header: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    try {\n      const res = await axios.post(\"/api/users\", user, config);\n\n      dispatch({\n        type: REGISTER_SUCCESS,\n        payload: res.data,\n      });\n\n      loadUser();\n    } catch (err) {\n      console.log(err.response);\n      if (err.response.data.msg === \"User already exists\") {\n        dispatch({\n          type: REGISTER_FAIL,\n          payload: err.response.data.msg,\n        });\n      } else {\n        dispatch({\n          type: EMAIL_FAIL,\n          payload: err.response.data.errors[0].msg,\n        });\n      }\n    }\n  };\n};\n\n// Login user\nexport const login = (user) => {\n  return async (dispatch) => {\n    const config = {\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n    };\n\n    try {\n      const res = await axios.post(\"/api/auth\", user, config);\n\n      dispatch({\n        type: LOGIN_SUCCESS,\n        payload: res.data,\n      });\n\n      loadUser();\n    } catch (err) {\n      dispatch({\n        type: LOGIN_FAIL,\n        payload: err.response.data.msg,\n      });\n    }\n  };\n};\n\n// Logout User\nexport const logout = () => {\n  return {\n    type: LOGOUT,\n  };\n};\n\n// Set alert\nexport const setAlert = (msg, type, timeout = 5000) => {\n  const id = uuidv4();\n  return async (dispatch) => {\n    dispatch({\n      type: SET_ALERT,\n      payload: { msg, type, id },\n    });\n\n    setTimeout(() => dispatch({ type: REMOVE_ALERT, payload: id }), timeout);\n  };\n};\n\nexport const clearErrors = () => {\n  return {\n    type: CLEAR_ERRORS,\n  };\n};\n"]},"metadata":{},"sourceType":"module"}