{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/src/components/shoppingCart/ShoppingCartCard.js\";\nimport React, { createRef, Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport { removeProductFromCart, updateQuantity } from \"../../actions\"; // eslint-disable-next-line\n\nimport css from \"../../css/shoppingCartCard.css\";\n\nconst ShoppingCartCard = props => {\n  const {\n    cartItems,\n    removeProductFromCart,\n    updateQuantity,\n    authUser\n  } = props;\n  const priceOfItems = [null];\n  cartItems.forEach(item => {\n    const totalEach = item.price * item.quantity;\n    priceOfItems.push(totalEach);\n  });\n\n  const reducer = (accumulator, currentValue) => accumulator + currentValue;\n\n  const totalOfCart = priceOfItems.reduce(reducer);\n\n  function decimalAdjust(type, value, exp) {\n    // If the exp is undefined or zero...\n    if (typeof exp === \"undefined\" || +exp === 0) {\n      return Math[type](value);\n    }\n\n    value = +value;\n    exp = +exp; // If the value is not a number or the exp is not an integer...\n\n    if (isNaN(value) || !(typeof exp === \"number\" && exp % 1 === 0)) {\n      return NaN;\n    } // Shift\n\n\n    value = value.toString().split(\"e\");\n    value = Math[type](+(value[0] + \"e\" + (value[1] ? +value[1] - exp : -exp))); // Shift back\n\n    value = value.toString().split(\"e\");\n    return +(value[0] + \"e\" + (value[1] ? +value[1] + exp : exp));\n  } // Decimal round\n\n\n  const round10 = (value, exp) => decimalAdjust(\"round\", value, exp);\n\n  const grandTotal = round10(totalOfCart, -2); // this creates an array of all the refs and stores them to an array for each item in cartItems\n\n  const refs = Array.from(cartItems, () => /*#__PURE__*/createRef(null)); // this handler loops through the refs and checks that they match the delete button's data-key and removes the item from the dom and cartItems\n\n  const deleteFromCart = e => {\n    refs.forEach(ref => {\n      if (ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")) {\n        removeProductFromCart(ref.current.getAttribute(\"value\"));\n      }\n    });\n  };\n\n  const renderOptions = cartItemQuantity => {\n    const options = [];\n\n    for (let i = 1; i <= 20; i++) {\n      options.push( /*#__PURE__*/_jsxDEV(\"option\", {\n        value: i,\n        children: [\"Qty: \", i]\n      }, [i], true, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 9\n      }, this));\n    }\n\n    return options;\n  };\n\n  const onChange = e => {\n    refs.forEach(ref => {\n      if (ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")) {\n        updateQuantity({\n          id: +ref.current.getAttribute(\"value\"),\n          quantity: +e.target.value\n        });\n      }\n    });\n  };\n\n  const itemValue = cartItem => {\n    return authUser.isAuthenticated ? cartItem._id : cartItem.id;\n  };\n\n  const renderItems = () => {\n    return cartItems.map((cartItem, i) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: refs[i],\n        value: itemValue(cartItem),\n        className: \"cart-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          className: \"cart-card__img\",\n          src: cartItem.image,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-card__body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            className: \"cart-card__title\",\n            children: cartItem.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n            children: [\"$\", cartItem.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"cart-card__button-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"form\", {\n              children: /*#__PURE__*/_jsxDEV(\"select\", {\n                onChange: e => onChange(e),\n                defaultValue: cartItem.quantity,\n                \"data-key\": cartItem.id,\n                name: \"Quantity\",\n                children: renderOptions(cartItem.quantity)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 104,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              onClick: deleteFromCart,\n              \"data-key\": cartItem.id,\n              className: \"cart-card__button-group-btn ml-1\",\n              children: \"Delete Item\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 112,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 99,\n          columnNumber: 11\n        }, this)]\n      }, cartItem.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this);\n    });\n  };\n\n  const emptyCart = () => {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Your shopping cart is empty\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 12\n    }, this);\n  };\n\n  return /*#__PURE__*/_jsxDEV(Fragment, {\n    children: grandTotal === 0 ? /*#__PURE__*/_jsxDEV(Fragment, {\n      children: emptyCart()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"shopping-cart-card-container mb-1\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"shopping-cart-title\",\n        children: \"Shopping Cart\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 135,\n        columnNumber: 11\n      }, this), renderItems(), /*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"subtotal ml-a\",\n        children: [\"Subtotal: $\", grandTotal]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 5\n  }, this);\n};\n\n_c = ShoppingCartCard;\n\nconst mapStateToProps = state => {\n  return {\n    cartItems: state.cartItems,\n    authUser: state.authUser\n  };\n};\n\nexport default connect(mapStateToProps, {\n  removeProductFromCart,\n  updateQuantity\n})(ShoppingCartCard);\n\nvar _c;\n\n$RefreshReg$(_c, \"ShoppingCartCard\");","map":{"version":3,"sources":["/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/client/src/components/shoppingCart/ShoppingCartCard.js"],"names":["React","createRef","Fragment","connect","removeProductFromCart","updateQuantity","css","ShoppingCartCard","props","cartItems","authUser","priceOfItems","forEach","item","totalEach","price","quantity","push","reducer","accumulator","currentValue","totalOfCart","reduce","decimalAdjust","type","value","exp","Math","isNaN","NaN","toString","split","round10","grandTotal","refs","Array","from","deleteFromCart","e","ref","current","getAttribute","target","renderOptions","cartItemQuantity","options","i","onChange","id","itemValue","cartItem","isAuthenticated","_id","renderItems","map","image","title","emptyCart","mapStateToProps","state"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,QAA3B,QAA2C,OAA3C;AACA,SAASC,OAAT,QAAwB,aAAxB;AACA,SAASC,qBAAT,EAAgCC,cAAhC,QAAsD,eAAtD,C,CAEA;;AACA,OAAOC,GAAP,MAAgB,gCAAhB;;AAEA,MAAMC,gBAAgB,GAAIC,KAAD,IAAW;AAClC,QAAM;AAAEC,IAAAA,SAAF;AAAaL,IAAAA,qBAAb;AAAoCC,IAAAA,cAApC;AAAoDK,IAAAA;AAApD,MAAiEF,KAAvE;AAEA,QAAMG,YAAY,GAAG,CAAC,IAAD,CAArB;AAEAF,EAAAA,SAAS,CAACG,OAAV,CAAmBC,IAAD,IAAU;AAC1B,UAAMC,SAAS,GAAGD,IAAI,CAACE,KAAL,GAAaF,IAAI,CAACG,QAApC;AACAL,IAAAA,YAAY,CAACM,IAAb,CAAkBH,SAAlB;AACD,GAHD;;AAKA,QAAMI,OAAO,GAAG,CAACC,WAAD,EAAcC,YAAd,KAA+BD,WAAW,GAAGC,YAA7D;;AAEA,QAAMC,WAAW,GAAGV,YAAY,CAACW,MAAb,CAAoBJ,OAApB,CAApB;;AAEA,WAASK,aAAT,CAAuBC,IAAvB,EAA6BC,KAA7B,EAAoCC,GAApC,EAAyC;AACvC;AACA,QAAI,OAAOA,GAAP,KAAe,WAAf,IAA8B,CAACA,GAAD,KAAS,CAA3C,EAA8C;AAC5C,aAAOC,IAAI,CAACH,IAAD,CAAJ,CAAWC,KAAX,CAAP;AACD;;AACDA,IAAAA,KAAK,GAAG,CAACA,KAAT;AACAC,IAAAA,GAAG,GAAG,CAACA,GAAP,CANuC,CAOvC;;AACA,QAAIE,KAAK,CAACH,KAAD,CAAL,IAAgB,EAAE,OAAOC,GAAP,KAAe,QAAf,IAA2BA,GAAG,GAAG,CAAN,KAAY,CAAzC,CAApB,EAAiE;AAC/D,aAAOG,GAAP;AACD,KAVsC,CAWvC;;;AACAJ,IAAAA,KAAK,GAAGA,KAAK,CAACK,QAAN,GAAiBC,KAAjB,CAAuB,GAAvB,CAAR;AACAN,IAAAA,KAAK,GAAGE,IAAI,CAACH,IAAD,CAAJ,CAAW,EAAEC,KAAK,CAAC,CAAD,CAAL,GAAW,GAAX,IAAkBA,KAAK,CAAC,CAAD,CAAL,GAAW,CAACA,KAAK,CAAC,CAAD,CAAN,GAAYC,GAAvB,GAA6B,CAACA,GAAhD,CAAF,CAAX,CAAR,CAbuC,CAcvC;;AACAD,IAAAA,KAAK,GAAGA,KAAK,CAACK,QAAN,GAAiBC,KAAjB,CAAuB,GAAvB,CAAR;AACA,WAAO,EAAEN,KAAK,CAAC,CAAD,CAAL,GAAW,GAAX,IAAkBA,KAAK,CAAC,CAAD,CAAL,GAAW,CAACA,KAAK,CAAC,CAAD,CAAN,GAAYC,GAAvB,GAA6BA,GAA/C,CAAF,CAAP;AACD,GA/BiC,CAiClC;;;AACA,QAAMM,OAAO,GAAG,CAACP,KAAD,EAAQC,GAAR,KAAgBH,aAAa,CAAC,OAAD,EAAUE,KAAV,EAAiBC,GAAjB,CAA7C;;AAEA,QAAMO,UAAU,GAAGD,OAAO,CAACX,WAAD,EAAc,CAAC,CAAf,CAA1B,CApCkC,CAsClC;;AACA,QAAMa,IAAI,GAAGC,KAAK,CAACC,IAAN,CAAW3B,SAAX,EAAsB,mBAAMR,SAAS,CAAC,IAAD,CAArC,CAAb,CAvCkC,CAyClC;;AACA,QAAMoC,cAAc,GAAIC,CAAD,IAAO;AAC5BJ,IAAAA,IAAI,CAACtB,OAAL,CAAc2B,GAAD,IAAS;AACpB,UACEA,GAAG,CAACC,OAAJ,CAAYC,YAAZ,CAAyB,OAAzB,MAAsCH,CAAC,CAACI,MAAF,CAASD,YAAT,CAAsB,UAAtB,CADxC,EAEE;AACArC,QAAAA,qBAAqB,CAACmC,GAAG,CAACC,OAAJ,CAAYC,YAAZ,CAAyB,OAAzB,CAAD,CAArB;AACD;AACF,KAND;AAOD,GARD;;AAUA,QAAME,aAAa,GAAIC,gBAAD,IAAsB;AAC1C,UAAMC,OAAO,GAAG,EAAhB;;AAEA,SAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,IAAI,EAArB,EAAyBA,CAAC,EAA1B,EAA8B;AAC5BD,MAAAA,OAAO,CAAC5B,IAAR,eACE;AAAQ,QAAA,KAAK,EAAE6B,CAAf;AAAA,4BACQA,CADR;AAAA,SAAuB,CAACA,CAAD,CAAvB;AAAA;AAAA;AAAA;AAAA,cADF;AAKD;;AACD,WAAOD,OAAP;AACD,GAXD;;AAaA,QAAME,QAAQ,GAAIT,CAAD,IAAO;AACtBJ,IAAAA,IAAI,CAACtB,OAAL,CAAc2B,GAAD,IAAS;AACpB,UACEA,GAAG,CAACC,OAAJ,CAAYC,YAAZ,CAAyB,OAAzB,MAAsCH,CAAC,CAACI,MAAF,CAASD,YAAT,CAAsB,UAAtB,CADxC,EAEE;AACApC,QAAAA,cAAc,CAAC;AACb2C,UAAAA,EAAE,EAAE,CAACT,GAAG,CAACC,OAAJ,CAAYC,YAAZ,CAAyB,OAAzB,CADQ;AAEbzB,UAAAA,QAAQ,EAAE,CAACsB,CAAC,CAACI,MAAF,CAASjB;AAFP,SAAD,CAAd;AAID;AACF,KATD;AAUD,GAXD;;AAaA,QAAMwB,SAAS,GAAIC,QAAD,IAAc;AAC9B,WAAOxC,QAAQ,CAACyC,eAAT,GAA2BD,QAAQ,CAACE,GAApC,GAA0CF,QAAQ,CAACF,EAA1D;AACD,GAFD;;AAIA,QAAMK,WAAW,GAAG,MAAM;AACxB,WAAO5C,SAAS,CAAC6C,GAAV,CAAc,CAACJ,QAAD,EAAWJ,CAAX,KAAiB;AACpC,0BACE;AACE,QAAA,GAAG,EAAEZ,IAAI,CAACY,CAAD,CADX;AAGE,QAAA,KAAK,EAAEG,SAAS,CAACC,QAAD,CAHlB;AAIE,QAAA,SAAS,EAAC,WAJZ;AAAA,gCAKE;AAAK,UAAA,SAAS,EAAC,gBAAf;AAAgC,UAAA,GAAG,EAAEA,QAAQ,CAACK,KAA9C;AAAqD,UAAA,GAAG,EAAC;AAAzD;AAAA;AAAA;AAAA;AAAA,gBALF,eAME;AAAK,UAAA,SAAS,EAAC,iBAAf;AAAA,kCACE;AAAI,YAAA,SAAS,EAAC,kBAAd;AAAA,sBAAkCL,QAAQ,CAACM;AAA3C;AAAA;AAAA;AAAA;AAAA,kBADF,eAEE;AAAA,4BAAMN,QAAQ,CAACnC,KAAf;AAAA;AAAA;AAAA;AAAA;AAAA,kBAFF,eAGE;AAAK,YAAA,SAAS,EAAC,yBAAf;AAAA,oCACE;AAAA,qCACE;AACE,gBAAA,QAAQ,EAAGuB,CAAD,IAAOS,QAAQ,CAACT,CAAD,CAD3B;AAEE,gBAAA,YAAY,EAAEY,QAAQ,CAAClC,QAFzB;AAGE,4BAAUkC,QAAQ,CAACF,EAHrB;AAIE,gBAAA,IAAI,EAAC,UAJP;AAAA,0BAKGL,aAAa,CAACO,QAAQ,CAAClC,QAAV;AALhB;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,oBADF,eAUE;AACE,cAAA,OAAO,EAAEqB,cADX;AAEE,0BAAUa,QAAQ,CAACF,EAFrB;AAGE,cAAA,SAAS,EAAC,kCAHZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,oBAVF;AAAA;AAAA;AAAA;AAAA;AAAA,kBAHF;AAAA;AAAA;AAAA;AAAA;AAAA,gBANF;AAAA,SAEOE,QAAQ,CAACF,EAFhB;AAAA;AAAA;AAAA;AAAA,cADF;AA8BD,KA/BM,CAAP;AAgCD,GAjCD;;AAmCA,QAAMS,SAAS,GAAG,MAAM;AACtB,wBAAO;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAAP;AACD,GAFD;;AAIA,sBACE,QAAC,QAAD;AAAA,cACGxB,UAAU,KAAK,CAAf,gBACC,QAAC,QAAD;AAAA,gBAAWwB,SAAS;AAApB;AAAA;AAAA;AAAA;AAAA,YADD,gBAGC;AAAK,MAAA,SAAS,EAAC,mCAAf;AAAA,8BACE;AAAI,QAAA,SAAS,EAAC,qBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADF,EAEGJ,WAAW,EAFd,eAGE;AAAI,QAAA,SAAS,EAAC,eAAd;AAAA,kCAA0CpB,UAA1C;AAAA;AAAA;AAAA;AAAA;AAAA,cAHF;AAAA;AAAA;AAAA;AAAA;AAAA;AAJJ;AAAA;AAAA;AAAA;AAAA,UADF;AAaD,CAtID;;KAAM1B,gB;;AAwIN,MAAMmD,eAAe,GAAIC,KAAD,IAAW;AACjC,SAAO;AACLlD,IAAAA,SAAS,EAAEkD,KAAK,CAAClD,SADZ;AAELC,IAAAA,QAAQ,EAAEiD,KAAK,CAACjD;AAFX,GAAP;AAID,CALD;;AAOA,eAAeP,OAAO,CAACuD,eAAD,EAAkB;AACtCtD,EAAAA,qBADsC;AAEtCC,EAAAA;AAFsC,CAAlB,CAAP,CAGZE,gBAHY,CAAf","sourcesContent":["import React, { createRef, Fragment } from \"react\";\nimport { connect } from \"react-redux\";\nimport { removeProductFromCart, updateQuantity } from \"../../actions\";\n\n// eslint-disable-next-line\nimport css from \"../../css/shoppingCartCard.css\";\n\nconst ShoppingCartCard = (props) => {\n  const { cartItems, removeProductFromCart, updateQuantity, authUser } = props;\n\n  const priceOfItems = [null];\n\n  cartItems.forEach((item) => {\n    const totalEach = item.price * item.quantity;\n    priceOfItems.push(totalEach);\n  });\n\n  const reducer = (accumulator, currentValue) => accumulator + currentValue;\n\n  const totalOfCart = priceOfItems.reduce(reducer);\n\n  function decimalAdjust(type, value, exp) {\n    // If the exp is undefined or zero...\n    if (typeof exp === \"undefined\" || +exp === 0) {\n      return Math[type](value);\n    }\n    value = +value;\n    exp = +exp;\n    // If the value is not a number or the exp is not an integer...\n    if (isNaN(value) || !(typeof exp === \"number\" && exp % 1 === 0)) {\n      return NaN;\n    }\n    // Shift\n    value = value.toString().split(\"e\");\n    value = Math[type](+(value[0] + \"e\" + (value[1] ? +value[1] - exp : -exp)));\n    // Shift back\n    value = value.toString().split(\"e\");\n    return +(value[0] + \"e\" + (value[1] ? +value[1] + exp : exp));\n  }\n\n  // Decimal round\n  const round10 = (value, exp) => decimalAdjust(\"round\", value, exp);\n\n  const grandTotal = round10(totalOfCart, -2);\n\n  // this creates an array of all the refs and stores them to an array for each item in cartItems\n  const refs = Array.from(cartItems, () => createRef(null));\n\n  // this handler loops through the refs and checks that they match the delete button's data-key and removes the item from the dom and cartItems\n  const deleteFromCart = (e) => {\n    refs.forEach((ref) => {\n      if (\n        ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")\n      ) {\n        removeProductFromCart(ref.current.getAttribute(\"value\"));\n      }\n    });\n  };\n\n  const renderOptions = (cartItemQuantity) => {\n    const options = [];\n\n    for (let i = 1; i <= 20; i++) {\n      options.push(\n        <option value={i} key={[i]}>\n          Qty: {i}\n        </option>\n      );\n    }\n    return options;\n  };\n\n  const onChange = (e) => {\n    refs.forEach((ref) => {\n      if (\n        ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")\n      ) {\n        updateQuantity({\n          id: +ref.current.getAttribute(\"value\"),\n          quantity: +e.target.value,\n        });\n      }\n    });\n  };\n\n  const itemValue = (cartItem) => {\n    return authUser.isAuthenticated ? cartItem._id : cartItem.id;\n  };\n\n  const renderItems = () => {\n    return cartItems.map((cartItem, i) => {\n      return (\n        <div\n          ref={refs[i]}\n          key={cartItem.id}\n          value={itemValue(cartItem)}\n          className='cart-card'>\n          <img className='cart-card__img' src={cartItem.image} alt='' />\n          <div className='cart-card__body'>\n            <h5 className='cart-card__title'>{cartItem.title}</h5>\n            <h1>${cartItem.price}</h1>\n            <div className='cart-card__button-group'>\n              <form>\n                <select\n                  onChange={(e) => onChange(e)}\n                  defaultValue={cartItem.quantity}\n                  data-key={cartItem.id}\n                  name='Quantity'>\n                  {renderOptions(cartItem.quantity)}\n                </select>\n              </form>\n              <span\n                onClick={deleteFromCart}\n                data-key={cartItem.id}\n                className='cart-card__button-group-btn ml-1'>\n                Delete Item\n              </span>\n            </div>\n          </div>\n        </div>\n      );\n    });\n  };\n\n  const emptyCart = () => {\n    return <div>Your shopping cart is empty</div>;\n  };\n\n  return (\n    <Fragment>\n      {grandTotal === 0 ? (\n        <Fragment>{emptyCart()}</Fragment>\n      ) : (\n        <div className='shopping-cart-card-container mb-1'>\n          <h1 className='shopping-cart-title'>Shopping Cart</h1>\n          {renderItems()}\n          <h1 className='subtotal ml-a'>Subtotal: ${grandTotal}</h1>\n        </div>\n      )}\n    </Fragment>\n  );\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    cartItems: state.cartItems,\n    authUser: state.authUser,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  removeProductFromCart,\n  updateQuantity,\n})(ShoppingCartCard);\n"]},"metadata":{},"sourceType":"module"}