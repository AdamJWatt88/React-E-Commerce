{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/src/components/ShoppingCartCard.js\",\n    _s = $RefreshSig$();\n\nimport React, { createRef, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { removeProductFromCart, updateQuantity } from \"../actions\"; // eslint-disable-next-line\n\nimport css from \"../css/shoppingCartCard.css\"; //Todo turn the onClick for the updateQuantity button into something that changes an element into an iput the user can interact with. Maybe do away with the button and the quantity display and add a select tag with quantitys as the options tags.\n\nconst ShoppingCartCard = props => {\n  _s();\n\n  const {\n    cartItems,\n    removeProductFromCart,\n    updateQuantity\n  } = props;\n  const [quantity, setQuantity] = useState(\"\");\n  const [input, setInput] = useState(false); // this creates an array of all the refs and stores them to an array for each item in cartItems\n\n  const refs = Array.from(cartItems, () => /*#__PURE__*/createRef(null)); // this handler loops through the refs and checks that they match the delete button's data-key and removes the item from the dom and cartItems\n\n  const deleteFromCart = e => {\n    refs.forEach(ref => {\n      if (ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")) {\n        removeProductFromCart(ref.current.getAttribute(\"value\"));\n      }\n    });\n  }; //! needs to update quantity after a user gives some input\n  //* have it wired up to update the quantity using component level state under a useEffect update\n\n\n  const updateCart = e => {\n    e.preventDefault();\n    refs.forEach(ref => {\n      if (ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")) {\n        updateQuantity({\n          id: +ref.current.getAttribute(\"value\"),\n          quantity: quantity\n        });\n      }\n    });\n  }; //toggles between an input field and a p element in renderedItems\n\n\n  const changeQuantityField = () => {\n    setInput(!input);\n    return input ? /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: () => updateCart(quantity),\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"number\",\n        value: quantity,\n        onChange: onChange\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"p\", {\n      children: [\"Quantity: \", cartItem.quantity]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this);\n  };\n\n  const testFunction = e => {\n    refs.forEach(ref => {\n      if (ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")) {\n        changeQuantityField();\n      }\n    });\n  };\n\n  const onChange = e => setQuantity(e.target.value);\n\n  const renderItems = () => {\n    return cartItems.map((cartItem, i) => {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: refs[i],\n        value: cartItem.id,\n        className: \"cart-card\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-card-img\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: cartItem.image,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"cart-card-body\",\n          children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n            children: cartItem.title\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: [\"$\", cartItem.price]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 82,\n            columnNumber: 13\n          }, this), changeQuantityField, /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"button-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: testFunction,\n              \"data-key\": cartItem.id,\n              className: \"btn btn-primary\",\n              children: \"Update Quantity\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 95,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: deleteFromCart,\n              \"data-key\": cartItem.id,\n              className: \"btn btn-danger\",\n              children: \"Delete From Cart\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 11\n        }, this)]\n      }, cartItem.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }, this);\n    });\n  };\n\n  console.log(props);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"container\",\n    children: renderItems()\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 10\n  }, this);\n};\n\n_s(ShoppingCartCard, \"fAAqmDUKmHeM/6gnuS6Bz5nhhvk=\");\n\n_c = ShoppingCartCard;\n\nconst mapStateToProps = state => {\n  return {\n    cartItems: state.cartItems\n  };\n};\n\nexport default connect(mapStateToProps, {\n  removeProductFromCart,\n  updateQuantity\n})(ShoppingCartCard);\n\nvar _c;\n\n$RefreshReg$(_c, \"ShoppingCartCard\");","map":{"version":3,"sources":["/Users/adamwatt/Desktop/JavaScriptProjects/React-practice/e-commerce/src/components/ShoppingCartCard.js"],"names":["React","createRef","useState","connect","removeProductFromCart","updateQuantity","css","ShoppingCartCard","props","cartItems","quantity","setQuantity","input","setInput","refs","Array","from","deleteFromCart","e","forEach","ref","current","getAttribute","target","updateCart","preventDefault","id","changeQuantityField","onChange","cartItem","testFunction","value","renderItems","map","i","image","title","price","console","log","mapStateToProps","state"],"mappings":"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","sourcesContent":["import React, { createRef, useState } from \"react\";\nimport { connect } from \"react-redux\";\nimport { removeProductFromCart, updateQuantity } from \"../actions\";\n\n// eslint-disable-next-line\nimport css from \"../css/shoppingCartCard.css\";\n\n//Todo turn the onClick for the updateQuantity button into something that changes an element into an iput the user can interact with. Maybe do away with the button and the quantity display and add a select tag with quantitys as the options tags.\nconst ShoppingCartCard = (props) => {\n  const { cartItems, removeProductFromCart, updateQuantity } = props;\n  const [quantity, setQuantity] = useState(\"\");\n  const [input, setInput] = useState(false);\n\n  // this creates an array of all the refs and stores them to an array for each item in cartItems\n  const refs = Array.from(cartItems, () => createRef(null));\n\n  // this handler loops through the refs and checks that they match the delete button's data-key and removes the item from the dom and cartItems\n  const deleteFromCart = (e) => {\n    refs.forEach((ref) => {\n      if (\n        ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")\n      ) {\n        removeProductFromCart(ref.current.getAttribute(\"value\"));\n      }\n    });\n  };\n\n  //! needs to update quantity after a user gives some input\n  //* have it wired up to update the quantity using component level state under a useEffect update\n\n  const updateCart = (e) => {\n    e.preventDefault();\n    refs.forEach((ref) => {\n      if (\n        ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")\n      ) {\n        updateQuantity({\n          id: +ref.current.getAttribute(\"value\"),\n          quantity: quantity,\n        });\n      }\n    });\n  };\n\n  //toggles between an input field and a p element in renderedItems\n  const changeQuantityField = () => {\n    setInput(!input);\n    return input ? (\n      <form onSubmit={() => updateCart(quantity)}>\n        <input type='number' value={quantity} onChange={onChange} />\n      </form>\n    ) : (\n      <p>Quantity: {cartItem.quantity}</p>\n    );\n  };\n\n  const testFunction = (e) => {\n    refs.forEach((ref) => {\n      if (\n        ref.current.getAttribute(\"value\") === e.target.getAttribute(\"data-key\")\n      ) {\n        changeQuantityField();\n      }\n    });\n  };\n\n  const onChange = (e) => setQuantity(e.target.value);\n\n  const renderItems = () => {\n    return cartItems.map((cartItem, i) => {\n      return (\n        <div\n          ref={refs[i]}\n          key={cartItem.id}\n          value={cartItem.id}\n          className='cart-card'>\n          <div className='cart-card-img'>\n            <img src={cartItem.image} alt='' />\n          </div>\n          <div className='cart-card-body'>\n            <h5>{cartItem.title}</h5>\n            <p>${cartItem.price}</p>\n            {/* //Todo create a controlled input with the value being set by an onChange event then finally after it is submit call the updateCart \n              //Todo after the input is submit change back to the p element\n            */}\n            {/* {input ? (\n              <form onSubmit={() => updateCart(quantity)}>\n                <input type='number' value={quantity} onChange={onChange} />\n              </form>\n            ) : (\n              <p>Quantity: {cartItem.quantity}</p>\n            )} */}\n            {changeQuantityField}\n            <div className='button-group'>\n              <button\n                onClick={testFunction}\n                data-key={cartItem.id}\n                className='btn btn-primary'>\n                Update Quantity\n              </button>\n              <button\n                onClick={deleteFromCart}\n                data-key={cartItem.id}\n                className='btn btn-danger'>\n                Delete From Cart\n              </button>\n            </div>\n          </div>\n        </div>\n      );\n    });\n  };\n  console.log(props);\n  return <div className='container'>{renderItems()}</div>;\n};\n\nconst mapStateToProps = (state) => {\n  return {\n    cartItems: state.cartItems,\n  };\n};\n\nexport default connect(mapStateToProps, {\n  removeProductFromCart,\n  updateQuantity,\n})(ShoppingCartCard);\n"]},"metadata":{},"sourceType":"module"}